<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Docs | Obsidian Stats Home</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
             
                <a href="index.html">
                    <h1 class="navbar-item">Obsidian Stats</h1>
                </a>
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    Documentation
                </a>
                
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
            <nav>
                
                    <h2><a href="index.html">Documentation</a></h2><div class="category"></div><div class="category"><h2>Scorer</h2><h3>Classes</h3><ul><li><a href="ScorerUtils.html">ScorerUtils</a></li></ul><h3><a href="global.html">Global</a></h3></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p></p>
                    <h1>Home</h1>
                </header>
                



    


    <h3> </h3>










    




    <section>
        <article><h2>Building a Custom Scorer</h2>
<h3>Score</h3>
<ul>
<li>The score is a floating point number ranging from 0 to 1.</li>
<li>To score a function we must set the property score on plugins (that was passed as argument to the function)</li>
</ul>
<pre class="prettyprint source"><code>plugin.score = 0.5;
</code></pre>
<h3>Where to see and create score fucntions?</h3>
<ul>
<li><code>[/scorer](https://www.obsidianstats.com/scorer)</code> page shows the list of all custom score functions.</li>
<li><code>[/scorer/build](https://www.obsidianstats.com/scorer/build)</code> page is where we create our custom score functions from.</li>
</ul>
<p>Have a look at <a href="https://www.obsidianstats.com/scorer">/scorer</a>. Right now, it will be empty with no score functions.</p>
<p><img src="/images/scorer/scorer-list.png" alt="List of custom scorers"></p>
<p>Click on <code>+ Create Scorer</code> button and start creating a scorer.</p>
<p><img src="/images/scorer/empty-builder.png" alt="Score Builder"></p>
<h3>Signature of the custom score function</h3>
<p>To build a custom scorer, you must create a javascript function</p>
<pre class="prettyprint source lang-js"><code>function scorePlugins(plugins, utils) {
  // ...
}
</code></pre>
<ul>
<li>The type of plugins is an array of <a href="global.html#PluginMetrics">PluginMetrics</a></li>
<li>The type of utils is <a href="ScorerUtils.html">ScorerUtils</a></li>
</ul>
<p>Let's build a simple score functions.</p>
<h3>Example 1: Setting score of all plugins to 50</h3>
<p>To set the scores of all plugins to 50, you can write the following custom score function.</p>
<pre class="prettyprint source"><code>function scorePlugins(plugins, utils) {
  plugins.forEach(plugin => {
    plugin.score = 0.5; // Setting the score of each plug to 0.5
  })
}
</code></pre>
<p>The first and last lines are not editable in the UI. So, fill the function with the 3 lines from above.</p>
<ul>
<li>One you are done, click <code>Validate</code>.</li>
<li>Upon successful validation, enter a name and description to the score function.</li>
<li>Click <code>Save and Use</code></li>
</ul>
<p><img src="/images/scorer/save-and-use.png" alt="Save and Use"></p>
<p>ðŸŽ‰ Congratulations! Your just set a custom score of 50 to all the plugins across the website. You can see the custom scores in different pages now (<a href="https://www.obsidianstats.com/new">new</a>, <a href="https://www.obsidianstats.com/most-downloaded">most-downloaded</a> etc.)</p>
<p>Let's build something usable now. In the <a href="https://www.obsidianstats.com/scorer/build">/scorer/build</a> page, click on &quot;New Scorer&quot; button to build our next scorer.</p>
<h3>Example 2: Setting score based on downloads count</h3>
<p>Use the below code to build a custom score function based on download count (totalDownloads property) of the plugins.</p>
<h4>Get all the download values</h4>
<pre class="prettyprint source"><code>function scorePlugins(plugins, utils) {
  let downloads = plugins.map(plugin => plugin.totalDownloads);
}
</code></pre>
<h4>Find min and max download counts among all plugins</h4>
<pre class="prettyprint source"><code>function scorePlugins(plugins, utils) {
  let downloads = plugins.map(plugin => plugin.totalDownloads);
  const min = Math.min(...downloads); // We use min and max from Math library
  const max = Math.max(...downloads);
}
</code></pre>
<h4>Assign normalized value of a plugin's totalDownloads as it's score</h4>
<pre class="prettyprint source"><code>function scorePlugins(plugins, utils) {
  let downloads = plugins.map(plugin => plugin.totalDownloads);
  const min = Math.min(...downloads);
  const max = Math.max(...downloads);
  plugins.forEach(plugin => {
    // we use normalize function from utils
    plugin.score = utils.normalize(plugin.totalDownloads, min, max);
  });
}
</code></pre>
<ul>
<li>The top most downloaded plugin has totalDownloads of 3,244,441 (Excalidraw)</li>
<li>The second most downloaded plugin has totalDownloads of 2,413,498 (Dataview)</li>
<li>The above function will score Excalidraw as 100 and the second best plugin will have a score of 76.</li>
<li>To avoid this skew in number we can remove few extreme values (outliers) on the higher end (we can do it on lower end as well to avoid outliers with zero or very less totalDownloads)</li>
</ul>
<h4>Remove outliers values before scoring</h4>
<pre class="prettyprint source"><code>function scorePlugins(plugins, utils) {
  let downloads = plugins
    .map(plugin => plugin.totalDownloads)
    .sort((a, b) => a - b);  // Let's sort all the totalDownload values
  
  const outliersCount = Math.round(plugins.length * 0.005) // We are considering 0.5% values as outliers on either side
  downloads = downloads.slice(outliersCount, plugins.length - outliersCount) // Sliding off the outliers
  
  const min = Math.min(...downloads);
  const max = Math.max(...downloads);
  plugins.forEach(plugin => {
    // we use normalize function from utils
    plugin.score = utils.normalize(plugin.totalDownloads, min, max);
  });
}
</code></pre>
<p>This change makes 10 plugins to score more than 80.</p>
<p>Note: We must analyse the disbution of each dimension we use to determine the outliers. The 0.5% is just an example here!</p>
<p>Validate, give a name and description and click <code>Save and Use</code>.</p>
<p><img src="/images/scorer/normalized-download-count-scorer.png" alt="normalized-download-count-scorer"></p>
<p>ðŸš€ Our new custom score function is being used across the website.</p>
<p>You can go to <a href="https://www.obsidianstats.com/plugins">all plugins</a> and sort by &quot;Score (High to Low)&quot; and see your custom scores in action.
Here is <a href="https://www.obsidianstats.com/plugins?sortby=score_desc">magic link</a> for the same!</p>
<p><img src="/images/scorer/all-plugins-with-score.png" alt="all-plugins-with-score"></p>
<p>Go to <a href="https://www.obsidianstats.com/scorer">/scorer</a> page to view the list of custom score function. You can edit a score function or use it from here!</p>
<p><img src="/images/scorer/scorer-list-with-scorers.png" alt="all-plugins-with-score"></p>
<p>Note: Your custom score function score the plugin locally in the browser and the custom scores are saved locally in your browser's <code>localStorage</code>.</p>
<h2>Going forward</h2>
<ul>
<li>I want to fix the default score function with clear objective to cater new comers to Obsidian.</li>
<li>I want to add more functions to <code>utils</code> to make building score functions easier.</li>
<li>Ofcourse, I want develop a process to publish scorer function and let everyone use it just like how we use themes and plugins in Obsidian.</li>
</ul>
<h2>Contribution</h2>
<ul>
<li>All your feedback and suggestions are welcome at the <a href="https://github.com/ganesshkumar/obsidian-plugins-stats-ui/discussions/52">Github discussion</a>.</li>
<li>Will update the link to the source of the <code>plugins</code> and <code>utils</code> soon. (They are not published anywhere yet as I write this!)</li>
</ul></article>
    </section>






            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>


</body>
</html>